function isValidEmail(a){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{1,5})$/.test(a)}function isValidName(a){return void 0!=a&&2<=a.length}function isValidSubdomain(a){return/^[0-9a-z][0-9a-z-]{1,18}[0-9a-z]$/i.test(a)}$(function(){$("select, input:checkbox, input:radio, input:file").uniform();$(":button").addClass("btn");$(":submit").addClass("btn");$("form").removeClass("quickform")});function submitForm(){var a=$("form");null!=a&&a.submit&&a.submit();return!1}
function twit(a,b){var c,d=a.getElementsByTagName("script")[0];if(!a.getElementById(b))c=a.createElement("script"),c.id=b,c.src="//platform.twitter.com/widgets.js",d.parentNode.insertBefore(c,d)}
function submit(){var a=$("#email").val(),b=$("#ref").val();validateForm()&&($("#form :input").each(function(){$(this).attr("disabled",!0)}),$.ajax({type:"POST",url:"/lead",data:{email:a,ref:b},success:function(a){_gaq.push(["_trackPageview","/process-form-complete"]);$("#form").fadeOut(500,function(){$("#form").html('<p id="thanks"><span class="underline">Thanks for your interest!</span> You are now on our list for a beta invite code.<br/>Share with your friends to get early access.<br/><br/><label>Share Link: </label><input type="text" title="'+a+
'" readonly="readonly" value="'+a+'" style="width:400px; background:none repeat scroll 0 0 transparent; color:whitesmoke; font-size: 14px;" onClick="this.select()"></input></p><a href="https://twitter.com/share" class="twitter-share-button" data-counturl="http://cloudno.de" data-url="'+a+'" data-text="Time to get your Node.js app online? Check this out:" data-related="cloudno_de">Tweet</a><script>twit(document, "twitter-wsj");<\/script>');$("#form").fadeIn(500)})}}))}
function validateForm(){var a=$("#email").val(),b="admin,me,contact,stuff,junk,mail,email,webmaster,tech,info,web,support,hello,projects,account,internet,social,online".split(","),c=validateItem("email",isValidEmail);if(c){var d=a.indexOf("@");if(-1!=d){var a=a.substring(0,d),e;for(e in b)if(b[e]==a)return alert("Please check your email address. You cannot join the beta list using a role-based email address.\n\nDetails at: http://docs.cloudno.de/beta-list"),!1}}return c}
function validateAppForm(){return validateItem("subdomain",isValidSubdomain)&&validateItem("description",isValidName)&&validateItem("coupon",isValidName)}function validateDBForm(){return validateItem("dbname",isValidName)}function validateItem(a,b){var c=$("#"+a),d=c.val();if(b(d))return $(c).removeClass("error"),!0;$(c).addClass("error");return!1}var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-276011-5"]);_gaq.push(["_setDomainName",".cloudno.de"]);_gaq.push(["_trackPageview"]);
(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();
function tab(a){var b=$("li#"+a.hash).siblings();b.each(function(a){""!=b[a].id&&($(b[a].firstChild).removeClass("selected"),$("div#"+b[a].id).addClass("hidden"))});$(a).addClass("selected");$("div"+a.hash).removeClass("hidden");return!1}function addPill(a){$("div."+a).removeClass("hidden");return!1}function closePill(a){$("div."+a).addClass("hidden");return!1}function validate(a){var b=a.val();if(isValidName(b))$(a).removeClass("error");else return $(a).addClass("error"),!1;return!0}
function submitKey(){var a=$("#keyname"),b=$("#sshkey");if(!validate(a)||!validate(b))return!1;$("form :input").each(function(){$(this).attr("disabled",!0)});$.post("/account",{keyname:a.val(),sshkey:b.val()},function(a){a.success?window.location="/account?ssh":alert(a.status);$("form :input").each(function(){$(this).attr("disabled",!1)})},"json")}
function removeKey(a){if(!confirm('Are you sure you want to delete the public SSH key for "'+a+'" ?'))return!1;$.post("/api/removekey",{keyname:a},function(a){a.success?window.location="/account?ssh":alert(a)},"json");return!1}function deleteDB(a){if(!confirm('Are you sure you want to delete the database "'+a+'" ?'))return!1;$.post("/api/deletedb",{dbname:a},function(a){a.success?window.location="/database":alert(a.status)},"json");return!1}
function submitProfile(){var a=$("#publicemail"),b=$("#website"),c=$("#company"),d=$("#location");if(a.val()&&!validateItem("publicemail",isValidEmail)||b.val()&&!validateItem("website",isValidName)||c.val()&&!validateItem("company",isValidName)||d.val()&&!validateItem("location",isValidName))return!1;a.attr("disabled",!0);b.attr("disabled",!0);c.attr("disabled",!0);d.attr("disabled",!0);$.post("/api/profile",{email:a.val(),website:b.val(),company:c.val(),location:d.val()},function(e){e.success&&
($(".inline-msg").removeClass("hidden"),a.attr("disabled",!1),b.attr("disabled",!1),c.attr("disabled",!1),d.attr("disabled",!1),$("span#bar").width($("span#bar").width()+10),setTimeout(function(){$(".inline-msg").addClass("hidden")},3E3))},"json")}
function submitBio(){var a=$("#biotext");if(!validateItem("biotext",isValidName))return!1;$("#biotext").attr("disabled",!0);$.post("/api/bio",{bio:a.val()},function(a){a.success&&($(".inline-msg").removeClass("hidden"),$("#biotext").attr("disabled",!1),$("span#bar").width($("span#bar").width()+10),setTimeout(function(){$(".inline-msg").addClass("hidden")},3E3))},"json")}
function controlApp(a,b){$.ajax({type:"POST",url:"/api/control/"+a,data:{running:b},success:function(a){"success"==a?window.location.reload():alert(a)}})}function deleteApp(a){confirm('Are you sure you want to delete the app "'+a+' and its repository"? This action cannot be undone.')&&$.ajax({type:"POST",url:"/api/deleteapp/"+a,data:{},success:function(a){"success"==a?window.location="/myapps":alert(a)}})}
function getLog(a){$.ajax({type:"GET",url:"/api/applogs/"+a,dataType:"json",data:{},success:function(a){if(a.success){var c="<h4>Application Log</h4><br />";$("div.detail").slideUp();for(var d in a.lines)c+=a.lines[d]+"<br/>";$("#log").html(c)}else alert(a.success)}})}
function getEnv(a){$.ajax({type:"GET",url:"/api/env/"+a,dataType:"json",data:{},success:function(a){if("success"==a.status){var c="<h4>Environment</h4><br />";$("div.detail").slideUp();for(var d in a.message)c+=d+" = "+a.message[d]+"<br/>";$("#log").html(c)}else alert(a.success)}})}function getCoupon(){$.get("/api/coupon",function(a){a.success?$("#coupon").val(a.coupon):alert("No coupons left, please retry in a few days.")},"json")}
function deleteUser(a,b){confirm('Are you sure you want to delete the account "'+a+"? This action cannot be undone.")&&$.ajax({type:"POST",url:"/api/deleteuser",data:{id:b},success:function(a){"success"==a?window.location="/admin/userlist":alert(a)}})}function gitWeb(a){a=a.substr(30);window.location="http://gitweb.cloudno.de/git-web/gitweb.cgi?p="+a;return!1}
function followUser(a){var b=$("#follow"),c=$("span#followers"),d=1*$(c).text(),e="Unfollow"==$(b).text();$.post("/api/follow",{name:a,on:e},function(a){a.success&&(e?($(b).text("Follow"),$(c).text(d-1)):($(b).text("Unfollow"),$(c).text(d+1)))},"json")}function limitText(a,b,c){a.value.length>c?a.value=a.value.substring(0,c):b.value=c-a.value.length}
function submitMessage(){var a=$("#to"),b=$("#subject"),c=$("#message");if(!validate(a)||!validate(b)||!validate(c))return!1;$("form :input").each(function(){$(this).attr("disabled",!0)});$.post("/api/message",{to:a.val(),subject:b.val(),message:c.val()},function(a){a.success?window.location="/account/sent":alert(a.status);$("form :input").each(function(){$(this).attr("disabled",!1)})},"json")}
function markRead(a,b,c){var d=$("span#"+b),e=1*$(d).text();$.post("/api/markRead",{id:c},function(b){b.success?($(a).parent().parent().parent().removeClass("unread"),$(d).text(e-1)):alert(b.status)},"json")}function deleteMessage(a,b,c){var d=$(a).parent().parent().parent();$.post("/api/deleteMessage",{id:c,target:b},function(a){a.success?d.remove():alert(a.status)},"json")}
function controlRedis(a,b){("delete"!=b||confirm('Are you sure you want to delete the Redis database "'+a+'" and all its data? This action cannot be undone.'))&&$.post("/api/controlredis",{dbname:a,action:b},function(a){if("ok"==a.status)switch(b){case "delete":window.location="/database";break;case "logs":var d="<h4>Redis Log</h4><br />";$("div.detail").slideUp();for(var e in a.data)d+=a.data[e]+"<br/>";$("#log").html(d);break;case "config":d="<h4>Redis Configuration</h4><br />";$("div.detail").slideUp();
for(e in a.data)d+=a.data[e]+"<br/>";$("#log").html(d);break;default:window.location.reload()}else alert(a.status)},"json")};
